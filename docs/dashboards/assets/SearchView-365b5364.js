import{_ as I,r as b,w as A,b as _,o as f,c as N,g as a,h as o,f as C,e as g,j as h,t as c,a as i,F as B,d as q,m as M}from"./index-340494a2.js";const E={props:{id:{default:"",type:String}},setup(S){const r=b([]),x=b([]),e=b(!1),j=b(null),T=b([]),d=b(""),m=b("Todos");var v=b([]);A(d,n=>{n&&n.indicator&&V(n.indicator,e)}),A(()=>S.id,n=>{var l=y(n);p(l)});function y(n){let l="";return n=="encuestas"&&(l='collection like "%25Survey%25"'),n=="censos"&&(l='collection like "%25Censuses%25"'),n=="web"&&(l='collection not like "%25Censuses%25" AND collection not like "%25Surveys%25"'),n=="all"?"https://mydata.iadb.org/resource/5bbz-ibhf.json":`https://mydata.iadb.org/resource/5bbz-ibhf.json?$where=${l}`}function k(){d3.selectAll("#search svg").remove(),d3.selectAll(".d3plus-Message").remove()}function p(n){d.value="",v.value=[],m.value="Todos",k(),fetch(n).then(l=>l.json()).then(l=>{x.value=[...new Set(l.map(t=>t.theme_es))],x.value.unshift("Todos"),r.value=[...new Set(l.map(t=>({indicator:t.indicator,name_es:t.label_es,name_en:t.label_en,theme_en:t.theme_en,theme_es:t.theme_es,description_es:t.description_es,description_en:t.description_en,collection:t.collection})))].sort(function(t,s){return t.indicator.localeCompare(s.indicator)})})}var w=n=>{fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&indicator=${n.indicator}&totals_dummy=1`).then(l=>l.json()).then(l=>{d3plus.colorDefaults.missing="white",d3plus.colorDefaults.scale.range(["#201923","#ffffff","#fcff5d","#7dfc00","#0ec434","#228c68","#8ad8e8","#235b54","#29bdab","#3998f5","#37294f","#277da7","#3750db","#f22020","#991919","#ffcba5","#e68f66","#c56133","#96341c","#632819","#ffc413","#f47a22","#2f2aa0","#b732cc","#772b9d","#f07cab","#d30b94","#edeff3","#c3a5b4","#946aa2","#5d4c86"]),d3.select("#viz").select("svg").remove(),d3.max(l,t=>+t.value),d3.min(l,t=>+t.value),[...new Set(l.map(t=>+t.year))],console.log(l.filter(t=>t.management=="Total"&&t.funding=="Total"&&t.idgeo=="country"&&t.isoalpha3=="BRA")),new d3plus.LinePlot().data(l.filter(t=>t.management=="Total"&&t.funding=="Total"&&t.idgeo=="country")).groupBy(["isoalpha3"]).height(600).x(t=>+t.year).legend(!1).discrete("x").lineLabels(!0).loadingMessage(!0).tooltip(!0).lineMarkers(!0).legend(!0).legendPosition("bottom").y(t=>parseFloat(t.value)).select("#viz").render()})};function V(n,l){k(),n!=""&&n!=null?fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&$limit=8000000&indicator=${n}`).then(t=>t.json()).then(t=>{d3plus.colorDefaults.missing="white";var s=Array.from(d3.group(t,u=>u.isoalpha3)).length,z=["quintile","education_level","ethnicity","disability","area","age","funding","migration","management","sex"];v.value=[],z.forEach(u=>{t.filter(D=>D[u]!="Total").length>0&&v.value.push(u)}),console.log(t),new d3plus.Matrix().data(t.filter(u=>u.totals_dummy==1)).groupBy(["isoalpha3","year"]).row(u=>u.isoalpha3).column(u=>+u.year).columnConfig({shapeConfig:{labelConfig:{fontResize:!1}}}).rowConfig({shapeConfig:{labelConfig:{fontResize:!1}}}).colorScaleConfig({color:["#60a5fa"]}).colorScale("indicator").legend(!0).height(s*30).select("#search").render(),d3.selectAll(".d3plus-Shape").on("click",u=>{var D=u.srcElement.__data__.data;l.value=!0,j.value=D})}):alert("NO HAY INFORMACIÓN")}return{getData:p,desagregacion_aplicada:v,themes:x,indicators:r,indicator_selected:d,theme_selected:m,defineSource:y,visible:e,item:j,drawViz:w,test:T}},mounted(){let S=this.$route.params.id;var r=this.defineSource(S);this.getData(r)}},F={id:"search"},P=i("p",{class:"text-3xl font-semibold text-black mb-2 lg:mb-0"},"DISPONIBILIDAD",-1),L=i("p",{class:"text-md mb-2 lg:mb-0 text-black"},"Se muestra la disponibilidad de los indicadores socioeconómicos para 26 países de América Latina y el Caribe por país y año, así como la descripción, fuente y desagregaciones de los mismos.",-1),O=["href"],R=["href"],H=i("b",null,"Identificador:",-1),U=i("b",null,"Nombre (ES):",-1),G=i("b",null,"Nombre (EN):",-1),J=i("b",null,"Descripcion (ES):",-1),Q=i("b",null,"Descripcion (EN):",-1),Y=i("b",null,"Fuente:",-1),K=i("p",{class:"pb-2"},[i("b",null,"Desagregaciones")],-1),W=i("div",{id:"viz"},null,-1),X=i("div",null,null,-1),Z=i("p",null,"* Al hacer click sobre alguno de los recuadros azules (pais-año), se podrá acceder a la descarga de los datos en formato CSV o JSON.",-1),$=i("div",{id:"search",class:"matrix-indicator px-10"},null,-1);function ee(S,r,x,e,j,T){const d=_("v-col"),m=_("v-row"),v=_("v-card-subtitle"),y=_("v-card-item"),k=_("v-spacer"),p=_("v-btn"),w=_("v-card-actions"),V=_("v-card"),n=_("v-dialog"),l=_("v-autocomplete"),t=_("v-chip");return f(),N("div",F,[a(m,{class:""},{default:o(()=>[a(d,null,{default:o(()=>[P,L]),_:1})]),_:1}),a(n,{modelValue:e.visible,"onUpdate:modelValue":r[1]||(r[1]=s=>e.visible=s),width:"auto"},{default:o(()=>[a(V,{title:"Descargas de datos"},{default:o(()=>[a(y,null,{default:o(()=>[a(v,null,{default:o(()=>[h("Formato JSON")]),_:1}),e.item?(f(),N("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3="+c(e.item.isoalpha3)+"&indicator="+c(e.item.indicator)+"&year="+c(e.item.year),9,O)):g("",!0)]),_:1}),a(y,null,{default:o(()=>[a(v,null,{default:o(()=>[h("Formato CSV")]),_:1}),e.item?(f(),N("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.csv?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.csv?isoalpha3="+c(e.item.isoalpha3)+"&indicator="+c(e.item.indicator)+"&year="+c(e.item.year),9,R)):g("",!0)]),_:1}),a(w,null,{default:o(()=>[a(k),a(p,{text:"Cerrar",onClick:r[0]||(r[0]=s=>e.visible=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(m,{class:""},{default:o(()=>[a(d,{cols:"6"},{default:o(()=>[e.themes?(f(),C(l,{key:0,variant:"outlined",class:"text-black",density:"compact",clearable:"",modelValue:e.theme_selected,"onUpdate:modelValue":r[2]||(r[2]=s=>e.theme_selected=s),items:e.themes,label:"Tema"},null,8,["modelValue","items"])):g("",!0)]),_:1}),a(d,{cols:"6"},{default:o(()=>[e.indicators!=0?(f(),C(l,{key:0,variant:"outlined",class:"text-black",density:"compact",clearable:"",modelValue:e.indicator_selected,"onUpdate:modelValue":r[3]||(r[3]=s=>e.indicator_selected=s),"return-object":"",items:e.indicators.filter(s=>e.theme_selected!="Todos"?s.theme_es==e.theme_selected:s),"item-value":"indicator","item-title":"name_es",label:"Indicador"},null,8,["modelValue","items"])):g("",!0)]),_:1})]),_:1}),e.indicator_selected&&e.indicator_selected.indicator?(f(),C(m,{key:0,class:""},{default:o(()=>[a(d,{cols:"8"},{default:o(()=>[i("p",null,[H,h(" "+c(e.indicator_selected.indicator),1)]),i("p",null,[U,h(" "+c(e.indicator_selected.name_es),1)]),i("p",null,[G,h(" "+c(e.indicator_selected.name_en),1)]),i("p",null,[J,h(" "+c(e.indicator_selected.description_es),1)]),i("p",null,[Q,h(" "+c(e.indicator_selected.description_en),1)]),i("p",null,[Y,h(" "+c(e.indicator_selected.collection),1)])]),_:1}),a(d,{cols:"4"},{default:o(()=>[K,(f(!0),N(B,null,q(e.desagregacion_aplicada,s=>(f(),C(t,null,{default:o(()=>[h(c(s),1)]),_:2},1024))),256))]),_:1})]),_:1})):g("",!0),a(m),e.indicator_selected&&e.indicator_selected.indicator?(f(),C(m,{key:1},{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[a(n,{fullscreen:""},{activator:o(({props:s})=>[a(p,M({variant:"outlined",class:"text-black",size:"x-small"},s,{text:"Tendencia",onClick:r[4]||(r[4]=z=>e.drawViz(e.indicator_selected))}),null,16)]),default:o(({isActive:s})=>[a(V,{title:""},{default:o(()=>[W,X,a(w,null,{default:o(()=>[a(k),a(p,{text:"Cerrar",onClick:z=>s.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1}),a(d,{cols:"12"},{default:o(()=>[Z]),_:1})]),_:1})):g("",!0),a(m,null,{default:o(()=>[a(d,{cols:"12"},{default:o(()=>[$]),_:1})]),_:1})])}const ae=I(E,[["render",ee]]);export{ae as default};
