import{_ as I,r as d,w as T,b as s,o as _,c as j,g as l,h as i,f as C,e as V,t as u,a as m,i as w,F as q,d as D}from"./index-d2eb828f.js";const M={props:{id:String},setup(N){const r=d([]),v=d([]),e=d(!1);let x=d(null);const A=d([]),h=d(""),p=d("Todos");var f=d([]);T(h,t=>{t&&t.indicator&&k(t.indicator,e)}),T(()=>N.id,t=>{var o=g(t);y(o)});function g(t){let o="";return t=="encuestas"&&(o='collection like "%25Survey%25"'),t=="censos"&&(o='collection like "%25Censuses%25"'),t=="web"&&(o='collection not like "%25Censuses%25" AND collection not like "%25Surveys%25"'),`https://mydata.iadb.org/resource/5bbz-ibhf.json?$where=${o}`}function b(){d3.selectAll("#search svg").remove(),d3.selectAll(".d3plus-Message").remove()}function y(t){h.value="",f.value=[],p.value="Todos",b(),fetch(t).then(o=>o.json()).then(o=>{v.value=[...new Set(o.map(a=>a.theme_es))],v.value.unshift("Todos"),r.value=[...new Set(o.map(a=>({indicator:a.indicator,name_es:a.label_es,name_en:a.label_en,theme_en:a.theme_en,theme_es:a.theme_es,description_es:a.description_es,description_en:a.description_en})))].sort(function(a,n){return a.indicator.localeCompare(n.indicator)})})}function k(t,o){b(),t!=""&&t!=null?fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&$limit=8000000&indicator=${t}`).then(a=>a.json()).then(a=>{d3plus.colorDefaults.missing="white";var n=Array.from(d3.group(a,c=>c.year)).length,B=["quintile","education_level","ethnicity","disability","area","age","funding","migration","management","sex"];f.value=[],B.forEach(c=>{a.filter(S=>S[c]!="Total").length>0&&f.value.push(c)}),new d3plus.Matrix().data(a.filter(c=>c.totals_dummy==1)).groupBy(["isoalpha3","year"]).row(c=>+c.year).column("isoalpha3").columnConfig({shapeConfig:{labelConfig:{}}}).rowConfig({shapeConfig:{labelConfig:{}}}).colorScaleConfig({color:["#60a5fa"]}).colorScale("indicator").legend(!1).height(n*30).select("#search").render(),d3.selectAll(".d3plus-Shape").on("click",c=>{var S=c.srcElement.__data__.data;o.value=!0,x.value=S})}):alert("NO HAY INFORMACIÓN")}return{getData:y,desagregacion_aplicada:f,themes:v,indicators:r,indicator_selected:h,theme_selected:p,defineSource:g,visible:e,item:x,test:A}},mounted(){}},z={id:"search"},E=["href"],F=m("b",null,"Nombre:",-1),U=m("b",null,"Identificador:",-1),H=m("b",null,"Descripcion:",-1),L=m("div",{id:"search",class:"matrix-indicator px-10"},null,-1);function O(N,r,v,e,x,A){const h=s("v-card-text"),p=s("v-spacer"),f=s("v-btn"),g=s("v-card-actions"),b=s("v-card"),y=s("v-dialog"),k=s("v-autocomplete"),t=s("v-col"),o=s("v-row"),a=s("v-chip");return _(),j("div",z,[l(y,{modelValue:e.visible,"onUpdate:modelValue":r[1]||(r[1]=n=>e.visible=n),width:"auto"},{default:i(()=>[l(b,{title:"Links útiles"},{default:i(()=>[l(h,{class:"select-all"},{default:i(()=>[e.item?(_(),j("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3="+u(e.item.isoalpha3)+"&indicator="+u(e.item.indicator)+"&year="+u(e.item.year),9,E)):V("",!0)]),_:1}),l(g,null,{default:i(()=>[l(p),l(f,{text:"Cerrar",onClick:r[0]||(r[0]=n=>e.visible=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(o,{class:""},{default:i(()=>[l(t,{cols:"6"},{default:i(()=>[e.themes?(_(),C(k,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.theme_selected,"onUpdate:modelValue":r[2]||(r[2]=n=>e.theme_selected=n),items:e.themes,label:"Tema"},null,8,["modelValue","items"])):V("",!0)]),_:1}),l(t,{cols:"6"},{default:i(()=>[e.indicators!=0?(_(),C(k,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.indicator_selected,"onUpdate:modelValue":r[3]||(r[3]=n=>e.indicator_selected=n),"return-object":"",items:e.indicators.filter(n=>e.theme_selected!="Todos"?n.theme_es==e.theme_selected:n),"item-value":"indicator","item-title":"name_es",label:"Indicador"},null,8,["modelValue","items"])):V("",!0)]),_:1})]),_:1}),e.indicator_selected&&e.indicator_selected.indicator?(_(),C(o,{key:0},{default:i(()=>[l(t,{cols:"12"},{default:i(()=>[m("p",null,[F,w(" "+u(e.indicator_selected.name_es),1)]),m("p",null,[U,w(" "+u(e.indicator_selected.indicator),1)]),m("p",null,[H,w(" "+u(e.indicator_selected.description_es),1)])]),_:1})]),_:1})):V("",!0),l(o,null,{default:i(()=>[l(t,{cols:"12"},{default:i(()=>[(_(!0),j(q,null,D(e.desagregacion_aplicada,n=>(_(),C(a,null,{default:i(()=>[w(u(n),1)]),_:2},1024))),256))]),_:1})]),_:1}),l(o,null,{default:i(()=>[l(t,{cols:"12"},{default:i(()=>[L]),_:1})]),_:1})])}const P=I(M,[["render",O]]);export{P as default};
