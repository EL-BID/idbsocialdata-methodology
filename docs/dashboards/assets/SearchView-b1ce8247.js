import{_ as B,r as _,w as T,b as s,o as m,c as N,g as n,h as i,f as w,e as x,t as u,a as d,i as v,F as D,d as I}from"./index-18bc3196.js";const q={props:{id:{default:"",type:String}},setup(p){const r=_([]),b=_([]),e=_(!1),S=_(null),A=_([]),h=_(""),g=_("Todos");var f=_([]);T(h,t=>{t&&t.indicator&&V(t.indicator,e)}),T(()=>p.id,t=>{var a=y(t);C(a)});function y(t){let a="";return t=="encuestas"&&(a='collection like "%25Survey%25"'),t=="censos"&&(a='collection like "%25Censuses%25"'),t=="web"&&(a='collection not like "%25Censuses%25" AND collection not like "%25Surveys%25"'),t=="all"?"https://mydata.iadb.org/resource/5bbz-ibhf.json":`https://mydata.iadb.org/resource/5bbz-ibhf.json?$where=${a}`}function k(){d3.selectAll("#search svg").remove(),d3.selectAll(".d3plus-Message").remove()}function C(t){h.value="",f.value=[],g.value="Todos",k(),fetch(t).then(a=>a.json()).then(a=>{b.value=[...new Set(a.map(o=>o.theme_es))],b.value.unshift("Todos"),r.value=[...new Set(a.map(o=>({indicator:o.indicator,name_es:o.label_es,name_en:o.label_en,theme_en:o.theme_en,theme_es:o.theme_es,description_es:o.description_es,description_en:o.description_en,collection:o.collection})))].sort(function(o,l){return o.indicator.localeCompare(l.indicator)})})}function V(t,a){k(),t!=""&&t!=null?fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&$limit=8000000&indicator=${t}`).then(o=>o.json()).then(o=>{d3plus.colorDefaults.missing="white";var l=Array.from(d3.group(o,c=>c.year)).length,z=["quintile","education_level","ethnicity","disability","area","age","funding","migration","management","sex"];f.value=[],z.forEach(c=>{o.filter(j=>j[c]!="Total").length>0&&f.value.push(c)}),console.log(o),new d3plus.Matrix().data(o.filter(c=>c.totals_dummy==1)).groupBy(["isoalpha3","year"]).row(c=>+c.year).column("isoalpha3").columnConfig({shapeConfig:{labelConfig:{fontResize:!0}}}).rowConfig({shapeConfig:{labelConfig:{fontResize:!0}}}).colorScaleConfig({color:["#60a5fa"]}).colorScale("indicator").legend(!0).height(l*30).select("#search").render(),d3.selectAll(".d3plus-Shape").on("click",c=>{var j=c.srcElement.__data__.data;a.value=!0,S.value=j})}):alert("NO HAY INFORMACIÓN")}return{getData:C,desagregacion_aplicada:f,themes:b,indicators:r,indicator_selected:h,theme_selected:g,defineSource:y,visible:e,item:S,test:A}},mounted(){let p=this.$route.params.id;var r=this.defineSource(p);this.getData(r)}},M={id:"search"},F=["href"],E=d("b",null,"Nombre:",-1),R=d("b",null,"Identificador:",-1),U=d("b",null,"Descripcion:",-1),H=d("b",null,"Fuente:",-1),L=d("div",{id:"search",class:"matrix-indicator px-10"},null,-1);function O(p,r,b,e,S,A){const h=s("v-card-text"),g=s("v-spacer"),f=s("v-btn"),y=s("v-card-actions"),k=s("v-card"),C=s("v-dialog"),V=s("v-autocomplete"),t=s("v-col"),a=s("v-row"),o=s("v-chip");return m(),N("div",M,[n(C,{modelValue:e.visible,"onUpdate:modelValue":r[1]||(r[1]=l=>e.visible=l),width:"auto"},{default:i(()=>[n(k,{title:"Links útiles"},{default:i(()=>[n(h,{class:"select-all"},{default:i(()=>[e.item?(m(),N("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3="+u(e.item.isoalpha3)+"&indicator="+u(e.item.indicator)+"&year="+u(e.item.year),9,F)):x("",!0)]),_:1}),n(y,null,{default:i(()=>[n(g),n(f,{text:"Cerrar",onClick:r[0]||(r[0]=l=>e.visible=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(a,{class:""},{default:i(()=>[n(t,{cols:"6"},{default:i(()=>[e.themes?(m(),w(V,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.theme_selected,"onUpdate:modelValue":r[2]||(r[2]=l=>e.theme_selected=l),items:e.themes,label:"Tema"},null,8,["modelValue","items"])):x("",!0)]),_:1}),n(t,{cols:"6"},{default:i(()=>[e.indicators!=0?(m(),w(V,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.indicator_selected,"onUpdate:modelValue":r[3]||(r[3]=l=>e.indicator_selected=l),"return-object":"",items:e.indicators.filter(l=>e.theme_selected!="Todos"?l.theme_es==e.theme_selected:l),"item-value":"indicator","item-title":"name_es",label:"Indicador"},null,8,["modelValue","items"])):x("",!0)]),_:1})]),_:1}),e.indicator_selected&&e.indicator_selected.indicator?(m(),w(a,{key:0},{default:i(()=>[n(t,{cols:"12"},{default:i(()=>[d("p",null,[E,v(" "+u(e.indicator_selected.name_es),1)]),d("p",null,[R,v(" "+u(e.indicator_selected.indicator),1)]),d("p",null,[U,v(" "+u(e.indicator_selected.description_es),1)]),d("p",null,[H,v(" "+u(e.indicator_selected.collection),1)])]),_:1})]),_:1})):x("",!0),n(a,null,{default:i(()=>[n(t,{cols:"12"},{default:i(()=>[(m(!0),N(D,null,I(e.desagregacion_aplicada,l=>(m(),w(o,null,{default:i(()=>[v(u(l),1)]),_:2},1024))),256))]),_:1})]),_:1}),n(a,null,{default:i(()=>[n(t,{cols:"12"},{default:i(()=>[L]),_:1})]),_:1})])}const P=B(q,[["render",O]]);export{P as default};
