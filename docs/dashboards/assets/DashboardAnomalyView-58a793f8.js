import{_ as v,r as h,b as f,o as b,c as x,g as o,h as r,i as y,a as n,t as A,j as g}from"./index-161bd139.js";d3plus.colorDefaults.missing="white";d3plus.colorDefaults.scale.range(["#305EA9","#1C97C9","#6CCDEF","#685990","#B1B6BA","#555555","#24264F","#30A98C","#F453AA","#F9965E","#FC4D4D","#FFCB65"]);d3plus.findLocale("pt-BR");const C={methods:{},setup(){var u=h(!1),m=h(0);function _(){Promise.all([fetch("https://mydata.iadb.org/resource/s8uc-zq8r.json").then(t=>t.ok&&t.json()||Promise.reject(t))]).then(t=>{var s=t[0],e=s.sort((a,i)=>a.isoalpha3<i.isoalpha3?-1:a.isoalpha3>i.isoalpha3?1:0),l=[];e.forEach(a=>{var i=l.filter(c=>a.indicator==c.indicator&&a.isoalpha3==c.isoalpha3)[0];i!=null?(i.years.push(+a.year),i.years=[...new Set(i.years.map(c=>+c))]):(a.years=[+a.year],l.push(a))}),this.anomalies=l,d(l)})}function d(t){var s=[{groupby:"indicator",container:"viz-resume",title:"Por indicador"},{groupby:"isoalpha3",container:"viz-resume-country",title:"Por país"},{groupby:"year",container:"viz-resume-year",title:"Por año"},{groupby:"theme_en",container:"viz-resume-theme",title:"Por tema"}];s.forEach(e=>{var l=new d3plus.Treemap().data(t).groupBy(e.groupby).title(e.title).color("theme_en").sum(a=>Array.isArray(a.unnamed_column)?a.unnamed_column.length:0).tooltipConfig({body:a=>`Cantidad: ${Array.isArray(a.unnamed_column)?a.unnamed_column.length:0}`,tbody:""}).shapeConfig({Rect:{label:a=>a[e.groupby].split(",").length>1?`Otros casos
${Array.isArray(a.unnamed_column)?a.unnamed_column.length:0}`:`${a[e.groupby]}
${Array.isArray(a.unnamed_column)?a.unnamed_column.length:0}`}}).legend(!1).height(300).threshold(.04).select(`#${e.container}`);console.log(l),l._locale="es-ES",l.render()})}function p(t){fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&indicator=${t.indicator}&isoalpha3=${t.isoalpha3}&totals_dummy=1`).then(s=>s.json()).then(s=>{d3.select("#viz").select("svg").remove(),console.clear(),d3.max(s,e=>e.value),new d3plus.LinePlot().data(s).groupBy(["isoalpha3","indicator"]).height(600).x(e=>+e.year).loadingMessage(!0).tooltip(!0).lineMarkerConfig({fill:(e,l)=>+e.y&&y(t.years).indexOf(e.x)>-1||e.value&&y(t.years).indexOf(+e.year)>-1?"#C24E4C":"#1E88E5",label:e=>d3.format(".2f")(e.y),r:20,labelConfig:{fontResize:!0}}).baseline(0).title(`Error encontrado en: <b>${t.isoalpha3} ${t.years.join(", ")} ${t.indicator} ${t.theme_en}</b>`).tooltip(!0).lineMarkers(!0).legend(!1).y(e=>+e.value).select("#viz").render()})}return{getData:_,anomalies:m,dialog:u,drawViz:p}},mounted(){this.getData()}},E={class:"container"},z=n("p",{class:"text-3xl font-semibold mb-2 lg:mb-0"},"REPORTE DE ANOMALÍAS EN LOS INDICADORES",-1),$=n("p",{className:"text-md mb-2 lg:mb-0"},[g("Con el objetivo de identificar indicadores con valores extremos, se definen las anomalías como aquellos cuyo valor se encuentra fuera de tres veces el rango intercuartílico para un país a través de los años. A continuación, se muestran la distribución de las anomalías por tema, año, indicadores y países, es decir, del total, la cantidad de anomalías que corresponde a cada categoría. La metodología detrás de la identificación de las anomalías se describe en el repositorio de Github: "),n("a",{class:"text-blue-400",href:"https://github.com/BID-DATA/scldata_anomaly_detection_scl/tree/development",target:"_blank"}," anomalías"),g(".")],-1),D={class:"p-1 text-white bg-gray-400"},w={class:"text-5xl font-weight-bold"},B=n("p",{class:"text-md"},"Total de anomalías ",-1),j=n("span",{class:""},"Distribución de anomalías (en porcentaje)",-1),P=n("hr",null,null,-1),k=n("div",{id:"viz-resume-theme"},null,-1),F=n("div",{id:"viz-resume-year"},null,-1),N=n("div",{id:"viz-resume-country"},null,-1),O=n("div",{id:"viz-resume"},null,-1);function R(u,m,_,d,p,t){const s=f("v-col"),e=f("v-row");return b(),x("div",E,[o(e,{class:""},{default:r(()=>[o(s,null,{default:r(()=>[z,$]),_:1})]),_:1}),o(e,null,{default:r(()=>[o(s)]),_:1}),o(e,{class:"justify-center"},{default:r(()=>[o(s,{class:"pb-10 text-center",cols:"3"},{default:r(()=>[n("div",D,[n("p",w,A(d.anomalies.length),1),B])]),_:1})]),_:1}),o(e,{class:"text-center pb-5"},{default:r(()=>[o(s,null,{default:r(()=>[j]),_:1})]),_:1}),P,o(e,{class:"py-5"},{default:r(()=>[o(s,{cols:"12",md:"6",sm:"12"},{default:r(()=>[k]),_:1}),o(s,{cols:"12",md:"6",sm:"12"},{default:r(()=>[F]),_:1})]),_:1}),o(e,{class:"py-5"},{default:r(()=>[o(s,{cols:"12",md:"6",sm:"12"},{default:r(()=>[N]),_:1}),o(s,{cols:"12",md:"6",sm:"12"},{default:r(()=>[O]),_:1})]),_:1})])}const q=v(C,[["render",R]]);export{q as default};
