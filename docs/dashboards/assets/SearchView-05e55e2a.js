import{_ as q,r as p,w as I,b as m,o as u,c as N,g as o,h as a,f as S,e as v,j as f,t as c,a as n,F as z,d as B}from"./index-738f42de.js";const E={props:{id:{default:"",type:String}},setup(k){const s=p([]),C=p([]),e=p(!1),w=p(null),A=p([]),_=p(""),h=p("Todos");var b=p([]);I(_,l=>{l&&l.indicator&&D(l.indicator,e)}),I(()=>k.id,l=>{var i=g(l);x(i)});function g(l){let i="";return l=="encuestas"&&(i='collection like "%25Survey%25"'),l=="censos"&&(i='collection like "%25Censuses%25"'),l=="web"&&(i='collection not like "%25Censuses%25" AND collection not like "%25Surveys%25"'),l=="all"?"https://mydata.iadb.org/resource/5bbz-ibhf.json":`https://mydata.iadb.org/resource/5bbz-ibhf.json?$where=${i}`}function V(){d3.selectAll("#search svg").remove(),d3.selectAll(".d3plus-Message").remove()}function x(l){_.value="",b.value=[],h.value="Todos",V(),fetch(l).then(i=>i.json()).then(i=>{C.value=[...new Set(i.map(t=>t.theme_es))],C.value.unshift("Todos"),s.value=[...new Set(i.map(t=>({indicator:t.indicator,name_es:t.label_es,name_en:t.label_en,theme_en:t.theme_en,theme_es:t.theme_es,description_es:t.description_es,description_en:t.description_en,collection:t.collection})))].sort(function(t,y){return t.indicator.localeCompare(y.indicator)})})}function D(l,i){V(),l!=""&&l!=null?fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&$limit=8000000&indicator=${l}`).then(t=>t.json()).then(t=>{d3plus.colorDefaults.missing="white";var y=Array.from(d3.group(t,d=>d.isoalpha3)).length,r=["quintile","education_level","ethnicity","disability","area","age","funding","migration","management","sex"];b.value=[],r.forEach(d=>{t.filter(j=>j[d]!="Total").length>0&&b.value.push(d)}),console.log(t),new d3plus.Matrix().data(t.filter(d=>d.totals_dummy==1)).groupBy(["isoalpha3","year"]).row(d=>d.isoalpha3).column(d=>+d.year).columnConfig({shapeConfig:{labelConfig:{fontResize:!1}}}).rowConfig({shapeConfig:{labelConfig:{fontResize:!1}}}).colorScaleConfig({color:["#60a5fa"]}).colorScale("indicator").legend(!0).height(y*30).select("#search").render(),d3.selectAll(".d3plus-Shape").on("click",d=>{var j=d.srcElement.__data__.data;i.value=!0,w.value=j})}):alert("NO HAY INFORMACIÓN")}return{getData:x,desagregacion_aplicada:b,themes:C,indicators:s,indicator_selected:_,theme_selected:h,defineSource:g,visible:e,item:w,test:A}},mounted(){let k=this.$route.params.id;var s=this.defineSource(k);this.getData(s)}},T={id:"search"},F=n("p",{class:"text-3xl font-semibold mb-2 lg:mb-0"},"DISPONIBILIDAD",-1),M=n("p",{class:"text-md mb-2 lg:mb-0"},"Se muestra la disponibilidad de los indicadores socioeconómicos para 26 países de América Latina y el Caribe por país y año, así como la descripción, fuente y desagregaciones de los mismos.",-1),O=["href"],L=["href"],R=n("b",null,"Identificador:",-1),U=n("b",null,"Nombre (ES):",-1),H=n("b",null,"Nombre (EN):",-1),J=n("b",null,"Descripcion (ES):",-1),P=n("b",null,"Descripcion (EN):",-1),G=n("b",null,"Fuente:",-1),Q=n("p",{class:"pb-2"},[n("b",null,"Desagregaciones")],-1),Y=n("p",null,"* Al hacer click sobre alguno de los recuadros azules (pais-año), se podrá acceder a la descarga de los datos en formato CSV o JSON.",-1),K=n("div",{id:"search",class:"matrix-indicator px-10"},null,-1);function W(k,s,C,e,w,A){const _=m("v-col"),h=m("v-row"),b=m("v-card-subtitle"),g=m("v-card-item"),V=m("v-spacer"),x=m("v-btn"),D=m("v-card-actions"),l=m("v-card"),i=m("v-dialog"),t=m("v-autocomplete"),y=m("v-chip");return u(),N("div",T,[o(h,{class:""},{default:a(()=>[o(_,null,{default:a(()=>[F,M]),_:1})]),_:1}),o(i,{modelValue:e.visible,"onUpdate:modelValue":s[1]||(s[1]=r=>e.visible=r),width:"auto"},{default:a(()=>[o(l,{title:"Descargas de datos"},{default:a(()=>[o(g,null,{default:a(()=>[o(b,null,{default:a(()=>[f("Formato JSON")]),_:1}),e.item?(u(),N("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.json?isoalpha3="+c(e.item.isoalpha3)+"&indicator="+c(e.item.indicator)+"&year="+c(e.item.year),9,O)):v("",!0)]),_:1}),o(g,null,{default:a(()=>[o(b,null,{default:a(()=>[f("Formato CSV")]),_:1}),e.item?(u(),N("a",{key:0,href:`https://mydata.iadb.org/resource/q8e9-eb82.csv?isoalpha3=${e.item.isoalpha3}&indicator=${e.item.indicator}&year=${e.item.year}`,target:"_blank"},"https://mydata.iadb.org/resource/q8e9-eb82.csv?isoalpha3="+c(e.item.isoalpha3)+"&indicator="+c(e.item.indicator)+"&year="+c(e.item.year),9,L)):v("",!0)]),_:1}),o(D,null,{default:a(()=>[o(V),o(x,{text:"Cerrar",onClick:s[0]||(s[0]=r=>e.visible=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(h,{class:""},{default:a(()=>[o(_,{cols:"6"},{default:a(()=>[e.themes?(u(),S(t,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.theme_selected,"onUpdate:modelValue":s[2]||(s[2]=r=>e.theme_selected=r),items:e.themes,label:"Tema"},null,8,["modelValue","items"])):v("",!0)]),_:1}),o(_,{cols:"6"},{default:a(()=>[e.indicators!=0?(u(),S(t,{key:0,variant:"outlined",density:"compact",clearable:"",modelValue:e.indicator_selected,"onUpdate:modelValue":s[3]||(s[3]=r=>e.indicator_selected=r),"return-object":"",items:e.indicators.filter(r=>e.theme_selected!="Todos"?r.theme_es==e.theme_selected:r),"item-value":"indicator","item-title":"name_es",label:"Indicador"},null,8,["modelValue","items"])):v("",!0)]),_:1})]),_:1}),e.indicator_selected&&e.indicator_selected.indicator?(u(),S(h,{key:0,class:""},{default:a(()=>[o(_,{cols:"8"},{default:a(()=>[n("p",null,[R,f(" "+c(e.indicator_selected.indicator),1)]),n("p",null,[U,f(" "+c(e.indicator_selected.name_es),1)]),n("p",null,[H,f(" "+c(e.indicator_selected.name_en),1)]),n("p",null,[J,f(" "+c(e.indicator_selected.description_es),1)]),n("p",null,[P,f(" "+c(e.indicator_selected.description_en),1)]),n("p",null,[G,f(" "+c(e.indicator_selected.collection),1)])]),_:1}),o(_,{cols:"4"},{default:a(()=>[Q,(u(!0),N(z,null,B(e.desagregacion_aplicada,r=>(u(),S(y,null,{default:a(()=>[f(c(r),1)]),_:2},1024))),256))]),_:1})]),_:1})):v("",!0),e.indicator_selected&&e.indicator_selected.indicator?(u(),S(h,{key:1},{default:a(()=>[o(_,{cols:"12"},{default:a(()=>[Y]),_:1})]),_:1})):v("",!0),o(h,null,{default:a(()=>[o(_,{cols:"12"},{default:a(()=>[K]),_:1})]),_:1})])}const X=q(E,[["render",W]]);export{X as default};
