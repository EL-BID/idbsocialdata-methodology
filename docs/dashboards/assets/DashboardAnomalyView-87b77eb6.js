import{_ as g,r as p,b as f,o as v,c as b,g as r,h as o,i as y,a as n,t as x}from"./index-32ead82d.js";d3plus.colorDefaults.missing="white";d3plus.colorDefaults.scale.range(["#305EA9","#1C97C9","#6CCDEF","#685990","#B1B6BA","#555555","#24264F","#30A98C","#F453AA","#F9965E","#FC4D4D","#FFCB65"]);d3plus.findLocale("pt-BR");const C={methods:{},setup(){var d=p(!1),m=p(0);function _(){Promise.all([fetch("https://mydata.iadb.org/resource/s8uc-zq8r.json").then(a=>a.ok&&a.json()||Promise.reject(a))]).then(a=>{var s=a[0],e=s.sort((t,i)=>t.isoalpha3<i.isoalpha3?-1:t.isoalpha3>i.isoalpha3?1:0),l=[];e.forEach(t=>{var i=l.filter(c=>t.indicator==c.indicator&&t.isoalpha3==c.isoalpha3)[0];i!=null?(i.years.push(+t.year),i.years=[...new Set(i.years.map(c=>+c))]):(t.years=[+t.year],l.push(t))}),this.anomalies=l,u(l)})}function u(a){var s=[{groupby:"indicator",container:"viz-resume",title:"Por indicador"},{groupby:"isoalpha3",container:"viz-resume-country",title:"Por país"},{groupby:"year",container:"viz-resume-year",title:"Por año"},{groupby:"theme_en",container:"viz-resume-theme",title:"Por tema"}];s.forEach(e=>{var l=new d3plus.Treemap().data(a).groupBy(e.groupby).title(e.title).color("theme_en").sum(t=>Array.isArray(t.unnamed_column)?t.unnamed_column.length:0).tooltipConfig({body:t=>`Cantidad: ${Array.isArray(t.unnamed_column)?t.unnamed_column.length:0}`,tbody:""}).shapeConfig({Rect:{label:t=>t[e.groupby].split(",").length>1?`Otros casos
${Array.isArray(t.unnamed_column)?t.unnamed_column.length:0}`:`${t[e.groupby]}
${Array.isArray(t.unnamed_column)?t.unnamed_column.length:0}`}}).legend(!1).height(300).threshold(.04).select(`#${e.container}`);console.log(l),l._locale="es-ES",l.render()})}function h(a){fetch(`https://mydata.iadb.org/resource/q8e9-eb82.json?$$app_token=IjHG1z0fQXsM9vxlkB8vPq3S2&indicator=${a.indicator}&isoalpha3=${a.isoalpha3}&totals_dummy=1`).then(s=>s.json()).then(s=>{d3.select("#viz").select("svg").remove(),console.clear(),d3.max(s,e=>e.value),new d3plus.LinePlot().data(s).groupBy(["isoalpha3","indicator"]).height(600).x(e=>+e.year).loadingMessage(!0).tooltip(!0).lineMarkerConfig({fill:(e,l)=>+e.y&&y(a.years).indexOf(e.x)>-1||e.value&&y(a.years).indexOf(+e.year)>-1?"#C24E4C":"#1E88E5",label:e=>d3.format(".2f")(e.y),r:20,labelConfig:{fontResize:!0}}).baseline(0).title(`Error encontrado en: <b>${a.isoalpha3} ${a.years.join(", ")} ${a.indicator} ${a.theme_en}</b>`).tooltip(!0).lineMarkers(!0).legend(!1).y(e=>+e.value).select("#viz").render()})}return{getData:_,anomalies:m,dialog:d,drawViz:h}},mounted(){this.getData()}},A={class:"container"},E=n("span",{class:"text-3xl font-semibold mb-2 lg:mb-0"},"REPORTE DE ANOMAÍAS EN LOS INDICADORES",-1),z={class:"p-1 text-white bg-gray-400"},$={class:"text-5xl font-weight-bold"},w=n("p",{class:"text-md"},"Total de anomalías ",-1),D=n("span",{class:""},"Distribución de anomalías (en porcentaje)",-1),B=n("hr",null,null,-1),j=n("div",{id:"viz-resume"},null,-1),P=n("div",{id:"viz-resume-country"},null,-1),k=n("div",{id:"viz-resume-year"},null,-1),F=n("div",{id:"viz-resume-theme"},null,-1);function O(d,m,_,u,h,a){const s=f("v-col"),e=f("v-row");return v(),b("div",A,[r(e,{class:""},{default:o(()=>[r(s,null,{default:o(()=>[E]),_:1})]),_:1}),r(e,null,{default:o(()=>[r(s)]),_:1}),r(e,{class:"justify-center"},{default:o(()=>[r(s,{class:"pb-10 text-center",cols:"3"},{default:o(()=>[n("div",z,[n("p",$,x(u.anomalies.length),1),w])]),_:1})]),_:1}),r(e,{class:"text-center pb-5"},{default:o(()=>[r(s,null,{default:o(()=>[D]),_:1})]),_:1}),B,r(e,{class:"py-5"},{default:o(()=>[r(s,{cols:"12",md:"6",sm:"12"},{default:o(()=>[j]),_:1}),r(s,{cols:"12",md:"6",sm:"12"},{default:o(()=>[P]),_:1})]),_:1}),r(e,{class:"py-5"},{default:o(()=>[r(s,{cols:"12",md:"6",sm:"12"},{default:o(()=>[k]),_:1}),r(s,{cols:"12",md:"6",sm:"12"},{default:o(()=>[F]),_:1})]),_:1})])}const S=g(C,[["render",O]]);export{S as default};
